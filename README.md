# java-convenience-store-precourse

# 🚀 기능 구현 목록

## Product (상품)

- 상품 생성
    - 상품명, 가격, 재고 수량, 프로모션 여부를 초기화한다.
    - 입력 값 예외처리 (아래 자세하게 정리)

## Employee(편의점 직원)

- 재고 확인 및 차감
    - 상품을 전달받아 재고를 확인한다.
    - 재고가 없다면 예외를 발생시킨다.
    - 재고가 충분할 경우, 재고를 차감한다.
- 매출액 계산
    - 상품을 전달받아 가격을 계산한다.
    - 멤버십 여부에 따라 가격을 할인한다.
    - 프로모션 여부에 따라 가격을 할인한다.

## MembershipDiscountManager (멤버십 할인 관리)

- 멤버십 할인 계산
    - 결제 금액에 대해 멤버십 할인을 계산하여 반환한다.
    - 멤버십 할인의 최대 한도는 8,000원으로 설정한다.
    - 할인 금액을 1000원단위로 내림 처리한다.
- 할인 적용 가능 여부 확인
    - 멤버십 할인이 적용 가능한 경우에만 할인을 계산하여 반환한다.

## Order (주문)

- 주문 생성
    - 장바구니에 있는 상품과 수량을 기반으로 주문을 생성한다.
    - 주문 시 상품의 재고를 확인하고, 재고가 부족할 경우 예외를 발생시킨다.
- 총 금액 계산
- 주문된 상품의 총 결제 금액을 계산한다.
- 각 상품의 가격과 수량을 곱하여 합산한다.
- 영수증 요청
    - 주문된 상품 목록과 결제 금액 정보를 기반으로 영수증을 생성한다.

## PromotionManager (프로모션 관리)

- 프로모션 적용 여부 확인
    - 상품이 프로모션 대상인지 확인하고, 프로모션 조건을 충족하는지 평가한다.
- 프로모션 할인가 계산
    - 프로모션 조건에 따라 혜택을 적용한 금액을 계산한다.
    - 1+1, 2+1 등 다양한 프로모션 형태를 지원한다.
- 프로모션 재고 관리
    - 프로모션에 필요한 재고가 충분한지 확인하고, 우선적으로 프로모션 재고를 사용한다.
    - 프로모션 재고가 부족할 경우, 일반 재고에서 차감한다.

## Customer(구매자)

- 멤버십 할인 요청
  - 결제 전에 멤버십 할인을 받을지 여부를 입력받는다.
- 프로모션 혜택 확인
  - 구매한 상품에 대해 프로모션 혜택이 있는 경우 이를 확인하고, 추가 수량을 구매할 경우 프로모션을 적용할 수 있음을 안내한다.
  - 고객이 추가 수량을 구매할지 여부를 입력받고, 입력에 따라 장바구니에 수량을 업데이트한다.
  - 프로모션 재고가 부족할 경우 일부 수량에 대해 정가로 결제할지 여부를 입력받는다.
- 결제 요청
  - 최종 결제 요청을 보낸다.
- 추가 구매 여부 확인
  - 구매 완료 후, 추가 구매 의사를 입력받는다.
  - 추가 구매를 진행할 경우, 현재 재고 상태를 기반으로 상품 목록을 다시 출력한다.
  - 추가 구매하지 않으면 결제 시스템을 종료한다.

## InventoryManager (재고 관리)
- 상품 정보 로드
  - src/main/resources/products.md 파일에서 상품 정보를 읽어와 저장한다.
  - 상품 정보는 상품명, 가격, 초기 재고 수량, 프로모션 정보를 포함한다.
  - 파일 형식이 올바르지 않거나 데이터가 누락된 경우 예외를 발생시킨다.
- 재고 조회
  - 특정 상품의 현재 재고 수량을 반환한다.
  - 편의점에 보유 중인 모든 상품의 이름, 가격, 재고 상태, 프로모션 여부를 출력한다.

## 입력

- 상품 선택 및 수량 입력
    - 상품명과 수량을 입력받아 장바구니에 추가한다.
    - 존재하지 않는 상품을 입력한 경우 예외를 발생시킨다.
    - 입력 형식이 올바르지 않은 경우 예외를 발생시킨다.
- 멤버십 할인 여부 확인
    - 멤버십 할인을 받을지 여부를 입력받는다.
    - 잘못된 값을 입력할 경우 예외를 발생시킨다.
- 추가 구매 여부 확인
    - 구매가 완료된 후 추가 구매 여부를 입력받는다.
    - 잘못된 값을 입력할 경우 예외를 발생시킨다.

## 출력

- 상품 목록 출력
    - 편의점에 있는 모든 상품의 이름, 가격, 재고 상태, 프로모션 여부를 출력한다.
- 영수증 출력
    - 구매 내역을 포함한 영수증을 고객에게 출력한다.
- 총 결제 금액 출력
    - 최종 결제 금액과 할인 내역을 출력한다.

## 테스트 코드
- 상품 테스트
- 직원 테스트
- 멤버십 할인 관리 테스트
- 주문 테스트
- 프로모션 관리 테스트
- 구매자 테스트

## 예외 처리
- [콜라-3],[에너지바-5] 형식으로 입력하지 않으면 예외를 발생시킨다.
- 구매할 상품과 수량 형식이 올바르지 않은 경우 예외를 발생시킨다.
- 존재하지 않는 상품을 입력한 경우 예외를 발생시킨다.
- 구매 수량이 재고 수량을 초과한 경우 예외를 발생시킨다.
- 구매 수량이 0 이하인 경우 예외를 발생시킨다.
- 멤버십 할인 여부를 Y/N으로 입력하지 않으면 예외를 발생시킨다.
- 추가 구매 여부를 Y/N으로 입력하지 않으면 예외를 발생시킨다.
- 추가 구매할 상품과 수량 형식이 올바르지 않은 경우 예외를 발생시킨다.
- 안내 문구 Y/N으로 입력하지 않으면 예외를 발생시킨다.
